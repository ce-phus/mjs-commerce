{% extends 'base.html' %}
{% load static %}

{% block content %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        fetch('http://127.0.0.1:8000/api/')
        .then((response) => response.json())
        .then((data) => {
            const carouselContainer = document.querySelector('.carousel-inner');
            data.forEach((item) => {
                console.log(item);
                let code = `
                <div class="carousel-item">
                    <img id="imgSlide" class="d-block w-100" src="${item.image_url}" alt="${item.title}" />
                    <div class="carousel-caption d-none d-md-block">
                        <h5>${item.title}</h5>
                    </div>
                </div>`;
                carouselContainer.innerHTML += code;
            });
        })
        .catch((error) => console.error('Error fetching data:', error));
    });
    </script>
    
    <style>
        /* Custom Carousel Styles */
    #carouselExampleIndicators {
        margin-top: 20px;
    }
    
    #imgSlide {
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        height: 400px; /* Set a fixed height for the images */
        object-fit: cover; /* Adjust the object-fit property as needed */
    }
    
    .carousel-caption {
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 5px;
        padding: 10px;
    }
    
    .carousel-caption h5,
    .carousel-caption p {
        color: #fff;
        margin: 0;
    }
    
    /* Centered Heading */
    #devnamdev {
        margin-top: 30px;
    }
    
    /* Buttons Styling */
    .btn-info,
    .btn-success {
        margin-top: 15px;
    }
        /* Custom Carousel Styles */
        #carouselExampleIndicators {
            margin-top: 20px;
        }
        
        #imgSlide {
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .carousel-caption {
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            padding: 10px;
        }
        
        .carousel-caption h5,
        .carousel-caption p {
            color: #fff;
            margin: 0;
        }
        
        /* Centered Heading */
        #devnamdev {
            margin-top: 30px;
        }
        
        /* Buttons Styling */
        .btn-info,
        .btn-success {
            margin-top: 15px;
        }
        </style>

<div id="carouselExampleIndicators" class="carousel slide col-span-2" data-ride="carousel">
    <div class="carousel-inner">
    <div class="carousel-item active">
        <img id="imgSlide" class="d-block w-100" src="https://images.pexels.com/photos/205421/pexels-photo-205421.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Flower" />
        <div class="carousel-caption d-none d-md-block">
        <h5>Best Laptops</h5>
        </div>
    </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
    </a>
</div>  
<div class="pt-5">
    {% for category in featured_categories %}
        <h2 class="flex items-center justify-center my-5 text-2xl font-semibold">{{ category.title }}</h2>
    
        {% with category.products.all as list_products %}
            {% include 'parts/products_list.html' %}
        {% endwith %} 
      {% endfor %}
</div>

{% endblock %}